<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Maydem üê±‚ú® ‚Äì Papeler√≠a & Fandom</title>
  <meta name="description" content="Papeler√≠a kawaii, fandom K‚Äëpop y anime. Compras por WhatsApp con retiro/ despacho.">
  <link rel="icon" href="https://raw.githubusercontent.com/twitter/twemoji/master/assets/72x72/1f431.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Cart drawer */
    .drawer {transition: transform .25s ease;} 
    .drawer.closed {transform: translateX(100%);} 
    .line-clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
  </style>
</head>
<body class="bg-white text-slate-800">
  <!-- Top bar -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/85 border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3">
      <div class="text-2xl font-black tracking-tight">Happy Maydem <span class="align-[-2px]">üê±‚ú®</span></div>
      <div class="ml-auto flex items-center gap-2">
        <a href="https://www.instagram.com/happymaydem/" class="text-sm underline underline-offset-2">Instagram</a>
        <a href="#" id="openCart" class="inline-flex items-center gap-2 text-sm font-semibold px-3 py-1.5 rounded-xl border border-slate-300 hover:bg-slate-50">üõí Carrito <span id="cartCount" class="text-xs font-bold">0</span></a>
      </div>
    </div>
  </header>

  <!-- Promo banner -->
  <div class="bg-pink-50 border-y border-pink-200">
    <div class="max-w-6xl mx-auto px-4 py-2 text-center text-sm">Aprovecha los <strong>env√≠os gratis</strong> por compras sobre <strong>$30.000</strong> en Stgo üßÅ</div>
  </div>

  <!-- Hero -->
  <section class="max-w-6xl mx-auto px-4 py-8 grid md:grid-cols-2 gap-6 items-center">
    <div>
      <h1 class="text-3xl md:text-4xl font-extrabold leading-tight">Papeler√≠a kawaii & fandom <span class="whitespace-nowrap">para coleccionistas</span></h1>
      <p class="mt-3 text-slate-600">Libretas, stickers, photocard holders, peluches alternativos, accesorios y m√°s. Compra directa por WhatsApp üí¨</p>
      <div class="mt-4 flex gap-3">
        <a href="#catalogo" class="px-4 py-2 rounded-2xl bg-slate-900 text-white text-sm font-semibold hover:bg-slate-800">Ver cat√°logo</a>
        <a id="btnWhatsappTop" target="_blank" class="px-4 py-2 rounded-2xl border text-sm font-semibold">Escr√≠benos por WhatsApp</a>
      </div>
    </div>
    <img alt="Happy Maydem banner" class="rounded-3xl shadow" src="https://images.unsplash.com/photo-1612198185723-5b0f9c6922a2?q=80&w=1600&auto=format&fit=crop"/>
  </section>

  <!-- Filtros -->
  <section class="max-w-6xl mx-auto px-4" id="catalogo">
    <div class="bg-white border rounded-2xl p-4 shadow-sm grid md:grid-cols-4 gap-3 items-end">
      <label class="block md:col-span-2">
        <span class="text-sm font-medium">Buscar</span>
        <input id="search" type="search" placeholder="libretas, BT21, Stray Kids‚Ä¶" class="mt-1 w-full rounded-xl border px-3 py-2"/>
      </label>
      <label class="block">
        <span class="text-sm font-medium">Categor√≠a</span>
        <select id="category" class="mt-1 w-full rounded-xl border px-3 py-2">
          <option value="">Todas</option>
        </select>
      </label>
      <label class="block">
        <span class="text-sm font-medium">Ordenar</span>
        <select id="sort" class="mt-1 w-full rounded-xl border px-3 py-2">
          <option value="featured">Destacados</option>
          <option value="price_asc">Precio: menor a mayor</option>
          <option value="price_desc">Precio: mayor a menor</option>
          <option value="az">A ‚Üí Z</option>
        </select>
      </label>
    </div>
  </section>

  <!-- Grid productos -->
  <section class="max-w-6xl mx-auto px-4 py-6">
    <div id="grid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
  </section>

  <!-- Drawer carrito -->
  <aside id="cartDrawer" class="fixed top-0 right-0 w-full max-w-md h-full bg-white border-l border-slate-200 shadow-xl drawer closed z-50">
    <div class="h-full flex flex-col">
      <div class="px-4 py-3 border-b flex items-center gap-3">
        <button id="closeCart" class="text-xl">‚úñ</button>
        <h2 class="font-bold text-lg">Tu carrito</h2>
      </div>
      <div id="cartItems" class="flex-1 overflow-auto divide-y"></div>
      <div class="p-4 border-t space-y-2">
        <div class="flex justify-between font-semibold"><span>Total</span><span id="cartTotal">$0</span></div>
        <button id="btnWhatsappCart" class="w-full px-4 py-2 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700">Enviar pedido por WhatsApp</button>
        <p class="text-xs text-slate-500">No pagas aqu√≠. Te contactamos por WhatsApp para coordinar pago y env√≠o.</p>
      </div>
    </div>
  </aside>

  <!-- Footer -->
  <footer class="border-t">
    <div class="max-w-6xl mx-auto px-4 py-8 grid md:grid-cols-3 gap-6 text-sm">
      <div>
        <div class="font-bold">Happy Maydem üê±‚ú®</div>
        <p class="text-slate-600">Papeler√≠a kawaii & fandom desde Chile.</p>
      </div>
      <div>
        <div class="font-bold">Pol√≠ticas</div>
        <ul class="list-disc list-inside text-slate-600">
          <li>Cambios: 10 d√≠as con boleta/recibo.</li>
          <li>Despachos: RM 24-72h; regiones por courier.</li>
          <li>Env√≠o gratis sobre $30.000 en RM.</li>
        </ul>
      </div>
      <div>
        <div class="font-bold">Contacto</div>
        <p class="text-slate-600">WhatsApp: <a id="waLink" class="underline" target="_blank"></a></p>
      </div>
    </div>
  </footer>

  <script>
    // === CONFIGURACI√ìN B√ÅSICA ===
    const STORE = {
      name: "Happy Maydem",
      whatsappNumber: "56995733148", // <-- REEMPLAZA por tu n√∫mero (sin + ni espacios). Ej: 56998765432
      currency: "$",
      freeShippingThreshold: 30000,
    };

    // === CAT√ÅLOGO (puedes editar o pegar m√°s productos) ===
    /** Campos: id, title, price, image, category, tags, featured **/
    const PRODUCTS = [
      { id: "bt21-a5", title: "Libreta BT21 A5", price: 5000, image: "https://images.unsplash.com/photo-1526318472351-c75fcf070305?q=80&w=1200&auto=format&fit=crop", category: "Papeler√≠a", tags: ["libreta","bt21","a5"], featured: true },
      { id: "skz-hop", title: "STRAY KIDS ‚Äì SKZHOP HIPTAPE (HOP)", price: 25000, image: "https://images.unsplash.com/photo-1514845505178-849cebf1a91f?q=80&w=1200&auto=format&fit=crop", category: "K‚Äëpop", tags: ["stray kids","album"], featured: true },
      { id: "twice-lovelys", title: "Peluches Lovelys Twice Summer (Alternativos)", price: 4000, image: "https://images.unsplash.com/photo-1520974699531-5a810fda9664?q=80&w=1200&auto=format&fit=crop", category: "Peluches", tags: ["twice","lovelys","peluche"], featured: false },
      { id: "pikabara", title: "Pikabara", price: 20000, image: "https://images.unsplash.com/photo-1605971102457-c18a126d59f0?q=80&w=1200&auto=format&fit=crop", category: "Anime", tags: ["figure","anime"], featured: false },
      // Ejemplos extra
      { id: "photocard-holder", title: "Photocard Holder Acr√≠lico", price: 3500, image: "https://images.unsplash.com/photo-1610961151692-b1dc757f3605?q=80&w=1200&auto=format&fit=crop", category: "Accesorios", tags: ["photocard","holder"], featured: true },
      { id: "sticker-pack", title: "Pack Stickers Kawaii (10u)", price: 2500, image: "https://images.unsplash.com/photo-1543002588-bfa74002ed7e?q=80&w=1200&auto=format&fit=crop", category: "Papeler√≠a", tags: ["stickers","kawaii"], featured: true },
    ];

    // === Estado simple ===
    let cart = [];

    // === Utilidades ===
    const fmt = n => `${STORE.currency}${n.toLocaleString('es-CL')}`;
    const waBase = `https://wa.me/${STORE.whatsappNumber}`;

    // Rellenar categor√≠as
    const categories = Array.from(new Set(PRODUCTS.map(p => p.category))).sort();
    const selCategory = document.getElementById('category');
    categories.forEach(cat => selCategory.insertAdjacentHTML('beforeend', `<option value="${cat}">${cat}</option>`));

    // Buscar/sort
    const inputSearch = document.getElementById('search');
    const selSort = document.getElementById('sort');

    function renderProducts(){
      const q = inputSearch.value.trim().toLowerCase();
      const cat = selCategory.value;
      let list = PRODUCTS.filter(p =>
        (!q || p.title.toLowerCase().includes(q) || p.tags.some(t => t.includes(q))) &&
        (!cat || p.category === cat)
      );
      switch(selSort.value){
        case 'price_asc': list.sort((a,b)=>a.price-b.price); break;
        case 'price_desc': list.sort((a,b)=>b.price-a.price); break;
        case 'az': list.sort((a,b)=>a.title.localeCompare(b.title)); break;
        default: list.sort((a,b)=>Number(b.featured)-Number(a.featured));
      }
      const grid = document.getElementById('grid');
      grid.innerHTML = list.map(p => cardHTML(p)).join('') || emptyHTML();
      attachAddHandlers();
    }

    function cardHTML(p){
      return `
      <article class="border rounded-2xl overflow-hidden shadow-sm hover:shadow transition">
        <img src="${p.image}" alt="${p.title}" class="w-full h-48 object-cover"/>
        <div class="p-4 space-y-2">
          <h3 class="font-semibold line-clamp-2">${p.title}</h3>
          <div class="text-slate-600 text-sm">${p.category}</div>
          <div class="font-bold">${fmt(p.price)}</div>
          <button data-id="${p.id}" class="btn-add w-full px-4 py-2 rounded-xl bg-slate-900 text-white font-semibold hover:bg-slate-800">A√±adir al carrito</button>
        </div>
      </article>`
    }

    function emptyHTML(){
      return `<div class="text-center text-slate-500 py-16">No encontramos productos con ese filtro üòø</div>`
    }

    function attachAddHandlers(){
      document.querySelectorAll('.btn-add').forEach(btn=>{
        btn.onclick = ()=>{
          const p = PRODUCTS.find(x=>x.id===btn.dataset.id);
          const item = cart.find(x=>x.id===p.id);
          if(item) item.qty++; else cart.push({id:p.id, title:p.title, price:p.price, qty:1});
          updateCartUI();
        }
      })
    }

    // === Carrito ===
    const cartDrawer = document.getElementById('cartDrawer');
    const openCart = document.getElementById('openCart');
    const closeCart = document.getElementById('closeCart');
    const cartCount = document.getElementById('cartCount');
    const cartItems = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');

    openCart.onclick = ()=> cartDrawer.classList.remove('closed');
    closeCart.onclick = ()=> cartDrawer.classList.add('closed');

    function updateCartUI(){
      const total = cart.reduce((s,i)=>s+i.price*i.qty,0);
      cartCount.textContent = cart.reduce((s,i)=>s+i.qty,0);
      cartTotal.textContent = fmt(total);
      cartItems.innerHTML = cart.map(i=>`
        <div class="flex items-center gap-3 p-3">
          <div class="flex-1">
            <div class="font-medium">${i.title}</div>
            <div class="text-sm text-slate-600">${i.qty} √ó ${fmt(i.price)}</div>
          </div>
          <div class="flex items-center gap-2">
            <button class="px-2 py-1 rounded border" data-act="dec" data-id="${i.id}">‚àí</button>
            <button class="px-2 py-1 rounded border" data-act="inc" data-id="${i.id}">+</button>
            <button class="px-2 py-1 rounded border" data-act="del" data-id="${i.id}">üóë</button>
          </div>
        </div>
      `).join('') || `<div class="p-6 text-center text-slate-500">Tu carrito est√° vac√≠o</div>`;
      // Bind qty actions
      cartItems.querySelectorAll('button').forEach(b=>{
        b.onclick = ()=>{
          const id = b.dataset.id; const act = b.dataset.act;
          const item = cart.find(x=>x.id===id);
          if(!item) return;
          if(act==='inc') item.qty++;
          if(act==='dec') item.qty = Math.max(1, item.qty-1);
          if(act==='del') cart = cart.filter(x=>x.id!==id);
          updateCartUI();
        }
      });
    }

    function buildWhatsappMessage(){
      if(!cart.length) return `${STORE.name}: Hola!`; 
      const lines = [
        `Hola! Quiero hacer un pedido en *${STORE.name}*:\n`,
        ...cart.map(i=>`‚Ä¢ ${i.title} √ó ${i.qty} ‚Äî ${fmt(i.price*i.qty)}`),
        `\nTotal: ${fmt(cart.reduce((s,i)=>s+i.price*i.qty,0))}`,
        `\nComuna/Regi√≥n:`,
        `\nM√©todo de pago (transferencia/efectivo):`
      ];
      return encodeURIComponent(lines.join("\n"));
    }

    // WhatsApp buttons
    const btnWhatsappTop = document.getElementById('btnWhatsappTop');
    const btnWhatsappCart = document.getElementById('btnWhatsappCart');
    const waLink = document.getElementById('waLink');

    function updateWhatsappLinks(){
      const url = `${waBase}?text=${buildWhatsappMessage()}`;
      btnWhatsappTop.href = url;
      btnWhatsappCart.onclick = ()=>{ window.open(url, '_blank'); };
      waLink.href = waBase; waLink.textContent = `+${STORE.whatsappNumber}`;
    }

    // Inicializar
    renderProducts();
    updateCartUI();
    updateWhatsappLinks();

    // Eventos de filtros
    [inputSearch, selCategory, selSort].forEach(el=> el.addEventListener('input', renderProducts));
  </script>
</body>
</html>
