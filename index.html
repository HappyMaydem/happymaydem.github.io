<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Maydem üê±‚ú® ‚Äì Papeler√≠a & Fandom</title>
  <meta name="description" content="Papeler√≠a kawaii, fandom K-pop y anime. Compras por WhatsApp con retiro/ despacho.">
  <link rel="icon" href="https://raw.githubusercontent.com/twitter/twemoji/master/assets/72x72/1f431.png" />
  <!-- Tailwind (necesario para los estilos de clases) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Identidad Happy Maydem ‚Äì pasteles + Comic Sans */
    :root{
      --hm-bg:#ffe6f0;       /* rosado pastel fondo */
      --hm-primary:#5a479e;  /* morado marca (barra superior/acentos) */
      --hm-pink:#fdaecb;     /* rosado men√∫ */
      --hm-dashed:pink;      /* bordes dashed tarjetas */
    }
    body{ font-family:'Comic Sans MS', cursive, sans-serif; background:var(--hm-bg); }
    .hm-card{ border:2px dashed var(--hm-dashed); border-radius:14px; background:#fff }
    .drawer{transition:transform .25s ease}
    .drawer.closed{transform:translateX(100%)}
    .line-clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
  </style>
</head>

<body class="text-slate-800">
  <!-- Barra superior promo -->
  <div class="w-full text-center text-white text-sm py-2" style="background:var(--hm-primary)">
    üì¶ Aprovecha los <b>env√≠os gratis</b> por compras sobre <b>$30.000</b> en Stgo
  </div>

  <!-- Encabezado: logo + redes + buscador -->
  <header class="bg-white">
    <div class="max-w-6xl mx-auto px-4 py-3 flex flex-wrap items-center gap-3 justify-between">
      <a href="/" class="flex items-center gap-3">
        <img src="logo.png" alt="Happy Maydem" class="h-16 md:h-20" onerror="this.style.display='none'"/>
        <span class="text-2xl md:text-3xl font-black tracking-tight">Happy Maydem üê±‚ú®</span>
      </a>
      <div class="flex items-center gap-3">
        <a href="https://www.instagram.com/happy.maydem" target="_blank" aria-label="Instagram" class="p-2 rounded-full hover:bg-pink-100">
          <img src="https://img.icons8.com/color/48/instagram-new.png" class="w-6 h-6" alt="Instagram">
        </a>
        <a href="https://www.facebook.com/people/Happy-Maydem/100092744970823/" target="_blank" aria-label="Facebook" class="p-2 rounded-full hover:bg-pink-100">
          <img src="https://img.icons8.com/color/48/facebook-new.png" class="w-6 h-6" alt="Facebook">
        </a>
        <a href="https://www.tiktok.com/@happy.maydem" target="_blank" aria-label="TikTok" class="p-2 rounded-full hover:bg-pink-100">
          <img src="https://img.icons8.com/ios-filled/50/000000/tiktok--v1.png" class="w-5 h-5" alt="TikTok">
        </a>
        <input id="search" type="search" placeholder="¬øQu√© quieres buscar?" class="px-3 py-2 rounded-full border-2" style="border-color:var(--hm-dashed)"/>
        <button id="openCart" class="ml-1 px-4 py-2 rounded-full text-white font-semibold" style="background:var(--hm-primary)">
          üõí Carrito <span id="cartCount" class="font-bold">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Banner -->
  <div class="banner">
    <img src="bannerdelgado.png" alt="Banner Happy Maydem" class="w-full block" onerror="this.style.display='none'">
  </div>

  <!-- Men√∫ navegaci√≥n -->
  <nav class="w-full text-center py-3" style="background:var(--hm-pink)">
    <a href="#" data-cat="" class="mx-3 text-white font-bold hover:underline">INICIO</a>
    <a href="#" data-cat="Papeler√≠a" class="mx-3 text-white font-bold hover:underline">PAPELER√çA</a>
    <a href="#" data-cat="Peluches" class="mx-3 text-white font-bold hover:underline">PELUCHES</a>
    <a href="#" data-cat="Accesorios" class="mx-3 text-white font-bold hover:underline">ACCESORIOS</a>
    <a href="#" data-cat="K-pop" class="mx-3 text-white font-bold hover:underline">KPOP</a>
    <a href="#" data-cat="Anime" class="mx-3 text-white font-bold hover:underline">ANIME</a>
  </nav>

  <!-- Controles + Grid -->
  <section class="max-w-6xl mx-auto px-4 mt-4">
    <div class="bg-white hm-card p-4 grid md:grid-cols-3 gap-3 items-end">
      <label class="block md:col-span-1">
        <span class="text-sm font-medium">Ordenar</span>
        <select id="sort" class="mt-1 w-full rounded-xl border px-3 py-2">
          <option value="featured">Destacados</option>
          <option value="price_asc">Precio: menor a mayor</option>
          <option value="price_desc">Precio: mayor a menor</option>
          <option value="az">A ‚Üí Z</option>
        </select>
      </label>
      <div class="md:col-span-2 text-sm text-slate-600">
        Usa el buscador de arriba o el men√∫ para filtrar por categor√≠a üíñ
      </div>
    </div>

    <!-- AQU√ç VAN LAS TARJETAS -->
    <div id="grid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 py-6"></div>
  </section>

  <!-- ======= SCRIPTS (al final, as√≠ el DOM ya existe) ======= -->
  <script>
    // === CONFIG B√ÅSICA ===
    const STORE = {
      name: "Happy Maydem",
      whatsappNumber: "56995733148", // <-- cambia por tu n√∫mero real (sin + ni espacios)
      currency: "$",
      freeShippingThreshold: 30000,
    };

    // === LISTA DE PRODUCTOS (prueba m√≠nima) ===
    const ALL_PRODUCTS = [
      { id: "bt21-a5", title: "Libreta BT21 A5", price: 5000, image: "Libreta Bt21.png", category: "Papeler√≠a", tags: ["libreta","bt21"], featured: true },
      { id: "skz-hop", title: "STRAY KIDS ‚Äì SKZHOP HIPTAPE (HOP)", price: 25000, image: "AlbumSkzHop.jpg", category: "K-pop", tags: ["stray kids","album"], featured: true },
      { id: "lovelys", title: "Peluches Lovelys Twice Summer (Alternativos)", price: 4000, image: "Lovelys.JPG", category: "Peluches", tags: ["twice","peluche"], featured: false },
    ];

    // Estado de categor√≠a (por men√∫)
    let ACTIVE_CATEGORY = "";

    // Elementos
    const inputSearch = document.getElementById('search');
    const selSort = document.getElementById('sort');
    const grid = document.getElementById('grid');

    // Utils
    const fmt = n => STORE.currency + n.toLocaleString('es-CL');

    function cardHTML(p){
      return `
        <article class="hm-card overflow-hidden shadow-sm hover:shadow transition">
          <img src="${p.image}" alt="${p.title}" class="w-full h-48 object-cover"/>
          <div class="p-4 space-y-2 text-center">
            <h3 class="font-semibold line-clamp-2">${p.title}</h3>
            <div class="text-slate-600 text-sm">${p.category}</div>
            <div class="font-bold">${fmt(p.price)}</div>
            <button data-id="${p.id}" class="btn-add w-full px-4 py-2 rounded-xl text-white font-semibold" style="background:#5a479e">A√±adir al carrito</button>
          </div>
        </article>`;
    }

    function emptyHTML(){
      return `<div class="text-center text-slate-600 py-16">No encontramos productos üòø</div>`;
    }

    function getProducts(){
      let list = [...ALL_PRODUCTS];
      if (ACTIVE_CATEGORY) list = list.filter(p => p.category === ACTIVE_CATEGORY);
      const q = (inputSearch?.value || '').trim().toLowerCase();
      if (q) list = list.filter(p =>
        p.title.toLowerCase().includes(q) ||
        (p.tags||[]).some(t => t.toLowerCase().includes(q))
      );
      switch (selSort?.value) {
        case 'price_asc':  list.sort((a,b)=>a.price-b.price); break;
        case 'price_desc': list.sort((a,b)=>b.price-a.price); break;
        case 'az':         list.sort((a,b)=>a.title.localeCompare(b.title)); break;
        default:           list.sort((a,b)=>Number(b.featured)-Number(a.featured));
      }
      return list;
    }

    function renderProducts(){
      const list = getProducts();
      grid.innerHTML = list.length ? list.map(cardHTML).join('') : emptyHTML();

      // Bot√≥n "A√±adir" (por ahora solo prueba)
      grid.querySelectorAll('.btn-add').forEach(btn=>{
        btn.onclick = ()=>{
          alert('Render OK ü•≥ (despu√©s conectamos el carrito)');
        };
      });
    }

    // Men√∫: filtra por categor√≠a
    document.querySelectorAll('nav [data-cat]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        ACTIVE_CATEGORY = a.getAttribute('data-cat') || "";
        renderProducts();
        window.scrollTo({ top: grid.offsetTop - 80, behavior: 'smooth' });
      });
    });

    // Eventos
    inputSearch?.addEventListener('input', renderProducts);
    selSort?.addEventListener('input', renderProducts);

    // Init
    renderProducts();
  </script>
</body>
</html>
